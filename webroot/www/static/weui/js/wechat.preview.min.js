!function(e,t){"function"==typeof define&&define.amd?define(["jquery",t]):"function"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery||e.Zepto)}(this,function(e,t){function a(t){var a=e(this),r=a.data(n.cacheKey),i=a.data(n.cacheGroup),o=c[i]||[r],u={current:r,urls:o};t.data&&t.data.debug&&console.log("(%d / %d) current: %s",o.indexOf(r)+1,o.length,r),wx.previewImage(u)}function r(t){var a=[],r=Math.random().toString(16).slice(2);e(this).each(function(){var n=e(this),i=t.attr,c=i&&n.attr(i)||n.data("src")||n.data("bgsrc")||n.attr("src")||"";c=o(c),c?a.push(c):console.warn("preview img not found!"),n.data(t.cacheKey,c),n.data(t.cacheGroup,r)}),t.group&&(c[r]=a)}var n={group:!0,event:"click",autoSelector:".wx-preview-image",item:"img",attr:"bgsrc",cacheKey:"wxPreviewSrc",cacheGroup:"wxPreviewGroup",debug:!1},i=new Image,c={},o=function(e){return e&&!/^http(s?)\:\/\//.test(e)?(i.src=e,i.src):e};e.fn.preview=function(t){t=e.extend({},n,t||{});var i=e(this);t.item===!1?(r.call(i,t),i.off(t.event,t.item,a),i.on(t.event,t.item,t,a)):i.each(function(){var n=e(this);t.item=n.data("item")||t.item,t.attr=n.data("attr"),r.call(n.find(t.item),t),n.off(t.event,t.item,a),n.on(t.event,t.item,t,a)})},e.fn.preview["default"]=n,e(function(){var t=e.fn.preview["default"];e(t.autoSelector).preview()})});
